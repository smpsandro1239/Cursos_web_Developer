<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aula 8 - JavaScript Assíncrono</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <header>
        <h1>Curso de JavaScript</h1>
        <h2>Aula 8: JavaScript Assíncrono (Callbacks, Promises, async/await)</h2>
    </header>
    <main>
        <section>
            <h3>1. Objetivo da Aula</h3>
            <p>Entender o que é código assíncrono e por que ele é fundamental em JavaScript para lidar com operações que levam tempo, como requisições de rede, sem travar a interface do usuário.</p>
        </section>
        <section>
            <h3>2. Teoria com Analogia</h3>
            <p>Imagine que você está em um restaurante. O modelo síncrono seria: você faz o pedido e fica parado, olhando para o balcão, sem poder fazer mais nada até sua comida chegar. O modelo assíncrono é o normal: você faz o pedido (uma "task" que leva tempo), recebe um pager (uma "Promise"), e volta para a mesa para conversar. Quando a comida fica pronta, o pager vibra (a "Promise" é resolvida), e você vai buscar. Você não ficou bloqueado esperando.</p>
        </section>
        <section>
            <h3>3. Prática Apoiada</h3>
            <p>Vamos buscar dados de um usuário de uma API pública usando `fetch`, que é baseado em Promises. Clique no botão para buscar os dados.</p>
            <button onclick="fetchUser()">Buscar Usuário</button>
            <pre id="userData"></pre>
            <script>
                async function fetchUser() {
                    try {
                        document.getElementById('userData').innerText = "Buscando...";
                        const response = await fetch('https://jsonplaceholder.typicode.com/users/1');
                        const data = await response.json();
                        document.getElementById('userData').innerText = JSON.stringify(data, null, 2);
                    } catch (error) {
                        document.getElementById('userData').innerText = "Falha ao buscar dados.";
                    }
                }
            </script>
        </section>
        <section>
            <h3>4. Perguntas de Múltipla Escolha</h3>
            <form id="quiz">
                <p>O que a palavra-chave `await` faz?</p>
                <input type="radio" name="q1" value="a"> a) Inicia uma função assíncrona.<br>
                <input type="radio" name="q1" value="b"> b) Pausa a execução de uma função `async` até que uma `Promise` seja resolvida.<br>
                <input type="radio" name="q1" value="c"> c) Trata erros em Promises.<br>
                <button type="button" onclick="checkQuiz()">Verificar</button>
            </form>
            <p id="explanation"></p>
        </section>
        <section>
            <h3>5. Resumo do que Aprendi</h3>
            <p>Nesta aula, aprendemos que JavaScript usa um modelo assíncrono para executar tarefas demoradas sem bloquear o fluxo principal. Exploramos o `async/await` para escrever código assíncrono que parece síncrono e é mais fácil de ler.</p>
        </section>
        <section>
            <h3>6. Próxima Aula</h3>
            <a href="#">Ir para a próxima aula</a>
        </section>
    </main>
    <script>
        function checkQuiz() {
            const answer = document.querySelector('input[name="q1"]:checked').value;
            if (answer === 'b') {
                document.getElementById('explanation').innerHTML = "Correto! `await` é o que nos permite esperar pela 'comida' (Promise) sem travar todo o 'restaurante' (nosso programa).";
            } else {
                document.getElementById('explanation').innerHTML = "Incorreto. A `await` pausa a execução para esperar o resultado de uma Promise, assim como você espera o pager vibrar antes de pegar a comida.";
            }
        }
    </script>
</body>
</html>
